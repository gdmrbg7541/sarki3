<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arapça Eğitim - Kesin Tam Ekran</title>
    <style>
        @font-face {
            font-family: 'arakom';
            src: url('arakom.ttf');
            font-weight: normal;
            font-style: normal;
        }

        body { 
            font-family: 'arakom', Arial, sans-serif; 
            background-color: #000; 
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
        }

        /* Ana Konteynır */
        #video-viewport {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
        }

        video { 
            width: 100%; 
            height: 100%;
            object-fit: contain;
        }

        /* Altyazı Katmanı - Videonun üzerine yapışık */
        #subtitle-layer {
            position: absolute;
            bottom: 12%; 
            left: 0;
            right: 0;
            pointer-events: none; 
            z-index: 9999;
            text-align: center;
        }

        .sentence-block {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 0;
            opacity: 0;
            visibility: hidden;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            width: 95%;
            transition: opacity 0.2s;
        }

        .sentence-block.visible {
            opacity: 1;
            visibility: visible;
        }

        .word {
            font-size: clamp(2.2rem, 7vw, 4.5rem);
            color: rgba(255, 255, 255, 0.5);
            text-shadow: 4px 4px 15px rgba(0, 0, 0, 1), 0 0 10px rgba(0,0,0,0.8);
            white-space: nowrap;
        }

        .word.active {
            color: #f1c40f; /* Parlak Sarı */
            transform: scale(1.15);
            opacity: 1;
        }

        /* Özel Tam Ekran Butonu */
        #full-screen-trigger {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10000;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            font-size: 14px;
        }

        #full-screen-trigger:hover {
            background: rgba(255, 255, 255, 0.4);
        }
    </style>
</head>
<body>

<div id="video-viewport">
    <button id="full-screen-trigger">TAM EKRAN (Altyazılı)</button>
    
    <video id="mainVideo" controls>
        <source src="video.mp4" type="video/mp4">
    </video>

    <div id="subtitle-layer">
        <div class="sentence-block" data-start="5" data-end="11">
            <span class="word" data-time="5">أَعِيْشُ</span>
            <span class="word" data-time="6">مَع</span>
            <span class="word" data-time="7">أُسْرَتي</span>
            <span class="word" data-time="8">أَبي</span>
            <span class="word" data-time="9">وَأُمّي</span>
            <span class="word" data-time="10">وَأَخي</span>
        </div>

        <div class="sentence-block" data-start="11" data-end="17">
            <span class="word" data-time="11">هُنا</span>
            <span class="word" data-time="12">بَيْتي</span>
            <span class="word" data-time="13">وَغُرْفَتي</span>
            <span class="word" data-time="14">فيها</span>
            <span class="word" data-time="15">كُلّ</span>
            <span class="word" data-time="16">سَعادَتي</span>
        </div>

        <div class="sentence-block" data-start="17" data-end="23">
            <span class="word" data-time="17">أَبي</span>
            <span class="word" data-time="18">طَبيب</span>
            <span class="word" data-time="19">مُجِدّ</span>
            <span class="word" data-time="20">أُمّي</span>
            <span class="word" data-time="21">مُدَرِّسَة</span>
            <span class="word" data-time="22">رائِعَة</span>
        </div>

        <div class="sentence-block" data-start="23" data-end="29">
            <span class="word" data-time="23">أَخي</span>
            <span class="word" data-time="24">طَبّاخ</span>
            <span class="word" data-time="25">ماهِر</span>
            <span class="word" data-time="26">يَعْمَلُ</span>
            <span class="word" data-time="27">في</span>
            <span class="word" data-time="28">المَطْعَم</span>
        </div>

        <div class="sentence-block" data-start="29" data-end="35">
            <span class="word" data-time="29">أُسَاعِدُ</span>
            <span class="word" data-time="30">أُمّي</span>
            <span class="word" data-time="31">وَأَبي</span>
            <span class="word" data-time="32">في</span>
            <span class="word" data-time="33">المَطْبَخ</span>
            <span class="word" data-time="34">وَالصَّالَة</span>
        </div>

        <div class="sentence-block" data-start="35" data-end="43">
            <span class="word" data-time="35">أُنَظِّفُ</span>
            <span class="word" data-time="36">غُرْفَتي</span>
            <span class="word" data-time="37">أُرَتِّبُ</span>
            <span class="word" data-time="38">مَكْتَبَتي</span>
            <span class="word" data-time="39">أَحْتَرِمُ</span>
            <span class="word" data-time="40">مُعَلِّمي</span>
            <span class="word" data-time="41">أُحِبُّ</span>
            <span class="word" data-time="42">مَدْرَسَتي</span>
        </div>

        <div class="sentence-block" data-start="43" data-end="50">
            <span class="word" data-time="43">أُسْرَتي</span>
            <span class="word" data-time="44">يا</span>
            <span class="word" data-time="45">أُسْرَتي</span>
            <span class="word" data-time="46">أَنْتِ</span>
            <span class="word" data-time="47">سِرّ</span>
            <span class="word" data-time="48">سَعادَتي</span>
        </div>
    </div>
</div>

<script>
    
    // SCORM API simülasyonu veya kontrolü
window.onload = function() {
    // LMS sistemine bağlandığımızı haber veriyoruz
    console.log("Etkinlik yüklendi.");
    // Eğer bir SCORM API'si kullanıyorsan buraya LMSInitialize("") gelmeli
};
   
    const video = document.getElementById('mainVideo');
    const viewport = document.getElementById('video-viewport');
    const fsBtn = document.getElementById('full-screen-trigger');
    const blocks = document.querySelectorAll('.sentence-block');
    const words = document.querySelectorAll('.word');

    // TAM EKRAN MANTIĞI: Videoyu değil, dış kutuyu tam ekran yapar
    fsBtn.addEventListener('click', () => {
        if (!document.fullscreenElement) {
            viewport.requestFullscreen().catch(err => {
                alert("Tam ekran hatası: " + err.message);
            });
            fsBtn.innerText = "KÜÇÜLT";
        } else {
            document.exitFullscreen();
            fsBtn.innerText = "TAM EKRAN (Altyazılı)";
        }
    });

    video.addEventListener('timeupdate', () => {
        const now = video.currentTime;

        // Blok görünürlüğü
        blocks.forEach(block => {
            const start = parseFloat(block.dataset.start);
            const end = parseFloat(block.dataset.end);
            if (now >= start && now < end) {
                block.classList.add('visible');
            } else {
                block.classList.remove('visible');
            }
        });

        // Kelime parlaması
        words.forEach((word, index) => {
            const wordTime = parseFloat(word.dataset.time);
            const nextTime = words[index + 1] ? parseFloat(words[index + 1].dataset.time) : video.duration;

            if (now >= wordTime && now < nextTime) {
                word.classList.add('active');
            } else {
                word.classList.remove('active');
            }
        });
    });
</script>

</body>
</html>